<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>MBTI Í≤ÄÏÇ¨</title>
    <style>
      body {
        max-width: 700px;
        margin: 40px auto;
        padding: 20px;
      }

      h1 {
        text-align: center;
        margin-bottom: 40px;
      }

      .question {
        background: #f9f9f9;
        padding: 20px;
        margin-bottom: 25px;
        border: 1px solid #ddd;
        border-radius: 10px;
      }

      .question p {
        font-size: 18px;
        margin-bottom: 15px;
      }

      .options {
        display: flex;
        gap: 20px;
        justify-content: center;
      }

      .option {
        display: inline-block;
      }

      input[type='radio'] {
        display: none;
      }

      label {
        display: inline-block;
        padding: 12px 24px;
        background-color: #a957c2;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
      }

      input[type='radio']:checked + label {
        background-color: #e03f65;
      }

      #result {
        margin: 40px 0;
        font-size: 20px;
        text-align: center;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <h1>üß† MBTI Í∞ÑÎã® Í≤ÄÏÇ¨</h1>
    <div id="result"></div>
    <div id="quiz"></div>

    <script>
      const QUESTIONS = {
        q1: { text: 'Í≥†Îì±ÌïôÍµêÏóêÏÑú Ïú†Î™ÖÌñàÎÇòÏöî?', a: 'E', b: 'I' }, // EI
        q2: { text: 'Ïö¥Îèô(Ïä§Ìè¨Ï∏†)Î•º ÌïòÎÇòÏöî?', a: 'S', b: 'N' }, // SN
        q3: { text: 'ÏàòÌïôÏùÑ ÏûòÌïòÎÇòÏöî?', a: 'T', b: 'F' }, // TF
        q4: { text: 'ÏßÄÍ∏à Î∞©Ïù¥ Íπ®ÎÅóÌïúÍ∞ÄÏöî?', a: 'J', b: 'P' }, // JP
      };

      const MBTI_TYPE = [
        ['E', 'I'],
        ['S', 'N'],
        ['T', 'F'],
        ['J', 'P'],
      ];

      const answers = {}; // ÏÇ¨Ïö©ÏûêÏùò ÏùëÎãµÏùÑ Ï†ÄÏû•Ìï† Í∞ùÏ≤¥
      const score = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 }; // Ï†êÏàò ÏßëÍ≥ÑÏö©
      const quizEl = document.getElementById('quiz');
      const resultEl = document.getElementById('result');

      // ÏòµÏÖò ÏÑ†ÌÉùÏûê ÏÉùÏÑ± Ìï®Ïàò
      function createOption(key, value, labelText) {
        // Object.assign - Ïó¨Îü¨ Í∞ùÏ≤¥Î•º ÌïòÎÇòÎ°ú Î≥ëÌï©ÌïòÏó¨ ÏõêÎ≥∏ Í∞ùÏ≤¥Î•º ÏÜêÏÉÅÏãúÌÇ§ÏßÄ ÏïäÎèÑÎ°ù ÏÉàÎ°úÏö¥ Í∞ùÏ≤¥Î•º ÏÉùÏÑ±ÌïúÎã§.
        const option = Object.assign(document.createElement('div'), { className: 'option' });
        const input = Object.assign(document.createElement('input'), {
          type: 'radio',
          id: `${key}_${value}`,
          name: key,
          value,
        });
        const label = Object.assign(document.createElement('label'), {
          htmlFor: input.id,
          textContent: labelText,
        });

        option.append(input, label);

        return option;
      }

      function renderQuestions() {
        // Object.entriesÎ°ú ÎèåÎ†§
        Object.entries(QUESTIONS).forEach(([key, { text, a, b }]) => {
          const questionWrapper = Object.assign(document.createElement('div'), { className: 'question' });
          const questionText = Object.assign(document.createElement('p'), { textContent: text });
          const optionsDiv = Object.assign(document.createElement('div'), { className: 'options' });

          optionsDiv.append(createOption(key, a, 'YES'), createOption(key, b, 'NO'));
          questionWrapper.append(questionText, optionsDiv);

          questionWrapper.addEventListener('change', (e) => {
            if (!e.target.name || !e.target.value) return;

            answers[e.target.name] = e.target.value;

            // Object.keysÎ°ú Î™®Îì† ÏßàÎ¨∏Ïóê ÏùëÎãµ ÏôÑÎ£åÌñàÎäîÏßÄ Í≤ÄÏÇ¨
            const isComplete = Object.keys(answers).length === Object.keys(QUESTIONS).length;
            if (isComplete) showResult();
          });

          quizEl.appendChild(questionWrapper);
        });
      }

      function showResult() {
        // Í∞ùÏ≤¥ Ïû¨Íµ¨ÏÑ±ÏùÑ ÏúÑÌï¥ entries ‚Üí fromEntries ÏÇ¨Ïö©
        const totalScore = Object.fromEntries(Object.entries(score).map(([key]) => [key, 0]));

        // Object.values - ÏÇ¨Ïö©Ïûê ÏùëÎãµÏùÑ Î∞òÎ≥µÌïòÎ©∞ Ìï¥Îãπ ÏßÄÌëúÏùò Ï†êÏàò Ï¶ùÍ∞Ä
        Object.values(answers).forEach((type) => totalScore[type]++);

        // Í∞Å Ìï≠Î™©Î≥Ñ Ï†êÏàò ÎπÑÍµê ÌõÑ MBTI 4ÏûêÎ¶¨ Î¨∏ÏûêÏó¥ ÏÉùÏÑ±
        const mbti = MBTI_TYPE.map(([a, b]) => (totalScore[a] >= totalScore[b] ? a : b)).join('');

        resultEl.textContent = `üß¨ ÎãπÏã†Ïùò MBTIÎäî: ${mbti}`;
      }

      renderQuestions();
    </script>
  </body>
</html>
